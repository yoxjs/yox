<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>双向绑定</title>
    <link rel="stylesheet" href="./style.css">
    <style>
        #app {
            padding: 20px;
        }
        .title {
            font-size: 26px !important;
            margin-top: 30px !important;
            margin-bottom: 20px !important;
        }
    </style>
</head>
<body>
    <div id="app"></div>
    <script id="template" type="plain/text">

        <div>
            <form class="ui form">

                <div class="field">
                    <label class="title">
                        组件同步
                    </label>
                </div>
                <div class="field">
                    <Child name="username" model="title" />
                </div>
                <div class="ui message">
                    {{title}}
                </div>



                <div class="field">
                    <label class="title">
                        input 实时同步
                    </label>
                </div>
                <div class="field">
                    <input type="text" model="title">
                </div>
                <div class="ui message">
                    {{title}}
                </div>





                <div class="field">
                    <label class="title">
                        input 延时同步
                    </label>
                </div>
                <div class="field">
                    <input type="text" model="title" lazy="500">
                </div>
                <div class="ui message">
                    {{title}}
                </div>





                <div class="field">
                    <label class="title">
                        input change 同步
                    </label>
                </div>
                <div class="field">
                    <input type="text" model="title" lazy>
                </div>
                <div class="ui message">
                    {{title}}
                </div>




                <div class="field">
                    <label class="title">
                        textarea 实时同步
                    </label>
                </div>
                <div class="field">
                    <textarea model="title"></textarea>
                </div>
                <div class="ui message">
                    {{title}}
                </div>




                <div class="field">
                    <label class="title">
                        textarea 延时同步
                    </label>
                </div>
                <div class="field">
                    <textarea model="title" lazy="500"></textarea>
                </div>
                <div class="ui message">
                    {{title}}
                </div>




                <div class="field">
                    <label class="title">
                        textarea change 同步
                        组件同步
                    </label>
                </div>
                <div class="field">
                    <textarea model="title" lazy></textarea>
                    <Child name="username" model="title" />
                </div>
                <div class="ui message">
                    {{title}}
                </div>


                <div class="field">
                    <label class="title">
                        单选框
                    </label>
                </div>
                <div class="grouped fields">
                    {{#each users}}
                        <div class="field">
                            <div class="ui radio checkbox">
                                <input type="radio" model="selectedUser" value="{{name}}">
                                <label>
                                    {{name}}
                                </label>
                            </div>
                        </div>
                    {{/each}}
                </div>
                <div class="ui message">
                    选中的用户：{{selectedUser}}
                </div>



                <div class="field">
                    <label class="title">
                        一个复选框
                    </label>
                </div>
                <div class="grouped fields">
                    <input type="checkbox" model="checkboxSelected">
                </div>
                <div class="ui message">
                    是否选中：{{checkboxSelected ? '是' : '否'}}
                </div>





                <div class="field">
                    <label class="title">
                        多个复选框
                    </label>
                </div>
                <div class="grouped fields">
                    {{#each users}}
                        <div class="field">
                            <div class="ui checkbox">
                                <input type="checkbox" model="selectedNames" value="{{name}}">
                                <label>
                                    {{name}}
                                </label>
                            </div>
                        </div>
                    {{/each}}
                </div>
                <div class="ui message">
                    选中的用户：{{formatSelectedNames(selectedNames)}}
                </div>





                <div class="field">
                    <label class="title">
                        select
                    </label>
                </div>
                <div class="field">
                    <select class="ui" model="selectedUser">
                    {{#each users}}
                        <option>
                            {{name}}
                        </option>
                    {{/each}}
                    </select>
                </div>
                <div class="ui message">
                    选中的用户：{{selectedUser}}
                </div>

            </form>


        </div>

    </script>
    <script src="../dist/yox.js"></script>
    <script>
        var Child = {
            template: '<input type="text" name="{{name}}" model="value">',
            propTypes: {
                name: {
                    type: 'string',
                    required: true,
                },
                value: {
                    type: 'string',
                    value: ''
                }
            },
            watchers: {
                value: function (value) {
                    this.fire('change', { value })
                }
            }
        };

        var instance = new Yox({
            el: '#app',
            template: '#template',
            data: {
                title: 'yoxjs',
                selectedUser: '',
                checkboxSelected: false,

                selectedNames: [],

                users: [
                    {
                        name: 'Jake'
                    },
                    {
                        name: 'John'
                    },
                    {
                        name: 'Mike'
                    }
                ]
            },
            filters: {
                formatSelectedNames: function (selectedNames) {
                    return '[' + selectedNames.toString() + ']';
                }
            },
            components: {
                Child: Child,
            }
        });

    </script>
</body>
</html>
