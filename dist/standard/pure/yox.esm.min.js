const t=!0,e=!1,n=null,r=void 0,i=-1,s="value",o="length",c="function",u="*",f=".",a="undefined"!=typeof window?window:r,h="undefined"!=typeof global?global:a,l=function(){},p=Object.freeze({}),d=Object.freeze([]),g="";function m(t){return typeof t===c}function v(t){return Array.isArray(t)}function y(t){return t!==n&&"object"==typeof t}function b(t){return"string"==typeof t}function w(t){return"number"==typeof t&&!isNaN(t)}function x(t){return"boolean"==typeof t}function $(t){return w(t)||b(t)&&!isNaN(parseFloat(t))&&isFinite(t)}var E=Object.freeze({func:m,array:v,object:y,string:b,number:w,boolean:x,numeric:$});function A(t,e,n){if(m(t))return v(n)?t.apply(e,n):e!==r?t.call(e,n):n!==r?t(n):t()}class O{constructor(t,e){this.type=t,this.phase=O.PHASE_CURRENT,e&&(this.originalEvent=e)}preventDefault(){const e=this;if(!e.isPrevented){const{originalEvent:n}=e;n&&n.preventDefault(),e.isPrevented=t}return e}stopPropagation(){const e=this;if(!e.isStoped){const{originalEvent:n}=e;n&&n.stopPropagation(),e.isStoped=t}return e}prevent(){return this.preventDefault()}stop(){return this.stopPropagation()}}function k(t,n,r){const{length:i}=t;if(i)if(r)for(let r=i-1;r>=0&&n(t[r],r)!==e;r--);else for(let r=0;r<i&&n(t[r],r)!==e;r++);}function C(t,e){t[t.length]=e}function j(t,e){t.unshift(e)}function P(t,e,n){v(e)?k(e,function(e){n(t,e)}):n(t,e)}function R(t,e){P(t,e,C)}function z(t,e){P(t,e,j)}function S(t,n,r){let s=i;return k(t,function(t,i){if(r===e?t==n:t===n)return s=i,e}),s}function T(n,r,i){let s=0;return k(n,function(t,o){(i===e?t==r:t===r)&&(n.splice(o,1),s++)},t),s}function D(t,e,n){return S(t,e,n)>=0}function N(t){return!v(t)||!t.length}O.PHASE_CURRENT=0,O.PHASE_UPWARD=1,O.PHASE_DOWNWARD=i;var W=Object.freeze({each:k,push:R,unshift:z,indexOf:S,last:function(t){const{length:e}=t;if(e>0)return t[e-1]},pop:function(t){const{length:e}=t;if(e>0)return t.pop()},remove:T,has:D,toArray:function(t){return v(t)?t:A(d.slice,t)},toObject:function(t,e,n){let r={};return k(t,function(t){r[e?t[e]:t]=n||t}),r},join:function(t,e){return t.join(e)},falsy:N});const _=/-([a-z])/gi,U=/\B([A-Z])/g,H=/^[a-z]/,I={},Y={},L={};function M(t,e,n){return w(n)?e===n?g:t.slice(e,n):t.slice(e)}function q(t,e,n){return t.indexOf(e,n!==r?n:0)}function F(t,e,n){return t.lastIndexOf(e,n!==r?n:t.length)}function B(t,e){return 0===q(t,e)}function G(t,e){return t.charCodeAt(e||0)}function V(t){return t.toUpperCase()}function X(t){return t.toLowerCase()}function Z(t,e){return q(t,e)>=0}function J(t){return!b(t)||!t.length}var K=Object.freeze({camelize:function(t){return I[t]||(I[t]=t.replace(_,function(t,e){return V(e)})),I[t]},hyphenate:function(t){return Y[t]||(Y[t]=t.replace(U,function(t,e){return"-"+X(e)})),Y[t]},capitalize:function(t){return L[t]||(L[t]=t.replace(H,V)),L[t]},trim:function(t){return J(t)?g:t.trim()},slice:M,indexOf:q,lastIndexOf:F,startsWith:B,endsWith:function(t,e){const n=t.length-e.length;return n>=0&&F(t,e)===n},charAt:function(t,e){return t.charAt(e||0)},codeAt:G,upper:V,lower:X,has:Z,falsy:J});const Q=/\./g,tt=/\*/g,et=/\*\*/g,nt={},rt={};function it(t,n){let r;v(nt[t])?r=nt[t]:(r=q(t,f)<0?[t]:t.split(f),nt[t]=r);for(let t=0,i=r.length-1;t<=i&&n(r[t],t,i)!==e;t++);}function st(t,e){let n=rt[e];if(!n){const t=e.replace(Q,"\\.").replace(tt,"(\\w+)").replace(et,"([.\\w]+?)");n=rt[e]=new RegExp(`^${t}$`)}const r=t.match(n);if(r)return r[1]}const ot={value:r};function ct(t){return Object.keys(t)}function ut(t,n){for(let r in t)if(n(t[r],r)===e)break}function ft(t){ut(t,function(e,n){delete t[n]})}function at(t,e){return ut(e,function(e,n){t[n]=e}),t}function ht(t,e){let n=t;return v(t)?e?(n=[],k(t,function(t,r){n[r]=ht(t,e)})):n=t.slice():y(t)&&(n={},ut(t,function(t,r){n[r]=e?ht(t,e):t})),n}function lt(t,i){return it(i,function(i,s,o){if(t==n)return t=r,e;{let e=t[i],n=e!==r;e&&m(e.get)&&(e=e.get()),s===o?n?(ot.value=e,t=ot):t=r:t=e}}),t}function pt(t,e){return t[e]!==r}var dt=Object.freeze({keys:ct,each:ut,clear:ft,extend:at,merge:function(t,e){return t&&e?at(at({},t),e):t||e},copy:ht,get:lt,set:function(t,n,r,i){it(n,function(n,s,o){if(s===o)t[n]=r;else if(t[n])t=t[n];else{if(!i)return e;t=t[n]={}}})},has:pt,falsy:function(t){return!y(t)||v(t)||!ct(t).length}});function gt(t,e){return t!=n&&t.toString?t.toString():e!==r?e:g}const mt=1,vt=2,yt=3,bt=4,wt=5,xt="undefined"!=typeof console?console:n,$t=/yox/.test(gt(l))?vt:yt,Et=a&&/edge|msie|trident/i.test(a.navigator.userAgent)?g:"%c",At=xt?Et?function(t,e,n){xt.log(Et+t,n,e)}:function(t,e){xt.log(t,e)}:l;function Ot(){if(h){const t=h.YOX_LOG_LEVEL;if(t>=mt&&t<=wt)return t}return $t}function kt(t){return`background-color:${t};border-radius:12px;color:#fff;font-size:10px;padding:3px 6px;`}var Ct=Object.freeze({DEBUG:mt,INFO:vt,WARN:yt,ERROR:bt,FATAL:wt,debug:function(t,e){Ot()<=mt&&At(e||"Yox debug",t,kt("#999"))},info:function(t,e){Ot()<=vt&&At(e||"Yox info",t,kt("#2db7f5"))},warn:function(t,e){Ot()<=yt&&At(e||"Yox warn",t,kt("#f90"))},error:function(t,e){Ot()<=bt&&At(e||"Yox error",t,kt("#ed4014"))},fatal:function(t,e){if(Ot()<=wt)throw new Error(`[${e||"Yox fatal"}]: ${t}`)}});class jt{constructor(t){this.ns=t||e,this.listeners={}}fire(n,i,s){let o=this,c=b(n)?o.parse(n):n,u=o.listeners[c.type],f=t;if(u){u=ht(u);const t=i&&i[0]instanceof O?i[0]:r;for(let n=0,a=u.length;n<a;n++){let a=u[n];if(!zt(c.ns,a)||!D(u,a)||s&&!s(c,i,a))continue;t&&(t.listener=a.fn);let h=A(a.fn,a.ctx,i);if(t&&(t.listener=r),a.num=a.num?a.num+1:1,a.num===a.max&&o.off(c,a.fn),t&&(h===e?t.prevent().stop():t.isStoped&&(h=e)),h===e){f=e;break}}}return f}on(t,e){const n=this,r=n.listeners,i=m(e)?{fn:e}:e;if(y(i)&&m(i.fn)){const e=b(t)?n.parse(t):t;i.ns=e.ns,R(r[e.type]||(r[e.type]=[]),i)}}off(e,n){const r=this,i=r.listeners;if(e){const s=b(e)?r.parse(e):e,o=s.type,c=s.ns,u=Rt(n),f=function(e,n){k(e,function(t,n){u(t)&&zt(c,t)&&e.splice(n,1)},t),e.length||delete i[n]};o?i[o]&&f(i[o],o):c&&ut(i,f)}else r.listeners={}}has(n,r){let i=this.listeners,s=b(n)?this.parse(n):n,o=s.type,c=s.ns,u=t,f=Rt(r),a=function(t){return k(t,function(t){if(f(t)&&zt(c,t))return u=e}),u};return o?i[o]&&a(i[o]):c&&ut(i,a),!u}parse(t){const e={type:t,ns:g};if(this.ns){const n=q(t,f);n>=0&&(e.type=M(t,0,n),e.ns=M(t,n+1))}return e}}function Pt(){return t}function Rt(t){return m(t)?function(e){return t===e.fn}:Pt}function zt(e,n){const{ns:r}=n;return r&&e?r===e:t}function St(t){return m(t)&&Z(gt(t),"[native code]")}let Tt;typeof setImmediate===c&&St(setImmediate)&&(Tt=setImmediate);var Dt=Tt=typeof MessageChannel===c&&St(MessageChannel)?function(t){const e=new MessageChannel;e.port1.onmessage=t,e.port2.postMessage(1)}:setTimeout;let Nt;class Wt{static shared(){return Nt||(Nt=new Wt)}constructor(){this.tasks=[]}append(t,e){const n=this,{tasks:r}=n;R(r,{fn:t,ctx:e}),1===r.length&&Dt(function(){n.run()})}prepend(t,e){const n=this,{tasks:r}=n;z(r,{fn:t,ctx:e}),1===r.length&&Dt(function(){n.run()})}clear(){this.tasks.length=0}run(){const{tasks:t}=this;t.length&&(this.tasks=[],k(t,function(t){A(t.fn,t.ctx)}))}}function _t(t,e){return $(t)?+t:e!==r?e:0}class Ut{constructor(e,n,r,i,s,o,c){const u=this;u.keypath=e,u.cache=r,u.deps=i,u.context=s.context,u.observer=s,u.getter=o,u.setter=c,u.unique={},u.watcher=function(n,r,i){const o=u.value,c=u.get(t);c!==o&&s.diff(e,c,o)},u.watcherOptions={sync:n,watcher:u.watcher},(u.fixed=!N(i))&&k(i,function(t){s.watch(t,u.watcherOptions)})}get(t){const e=this,{getter:n,context:r}=e;if(e.cache){if(t||!pt(e,s))if(e.fixed)e.value=A(n,r);else{e.unbind();const t=Ut.current;Ut.current=e,e.value=A(n,r),e.bind(),Ut.current=t}}else e.value=A(n,r);return e.value}set(t){const{setter:e,context:n}=this;e&&e.call(n,t)}add(e){this.unique[e]=t}bind(){const{unique:t,deps:e,observer:n,watcherOptions:r}=this;ut(t,function(t,i){R(e,i),n.watch(i,r)}),this.unique={}}unbind(){const{deps:e,observer:n,watcher:r}=this;k(e,function(t){n.unwatch(t,r)},t),e.length=0}}function Ht(t,e){if(t==n||e===g)return t;const r=lt(t,e);return r?r.value:void 0}function It(e,n,i,s,c){const u=function(t,n,i){if(n!==i){const a=(u=t,(o=e)&&u?o+f+u:o||u);k(s,function(t){st(a,t)!==r&&c(t,a,n,i)}),It(a,n,i,s,c)}var o,u};(function(e,n,i){const s=b(e),c=b(n);if(s||c)return i(o,s?e.length:r,c?n.length:r),t})(n,i,u)||function(e,n,i){const s=v(e),c=v(n);if(s||c){const u=s?e.length:r,f=c?n.length:r;i(o,u,f);for(let t=0,s=Math.max(u||0,f||0);t<s;t++)i(""+t,e?e[t]:r,n?n[t]:r);return t}}(n,i,u)||function(t,e,n){const r=y(t),i=y(e);(r||i)&&(t=r?t:p,e=i?e:p,r&&ut(t,function(t,r){t!==e[r]&&n(r,t,e[r])}),i&&ut(e,function(e,r){e!==t[r]&&n(r,t[r],e)}))}(n,i,u)}function Yt(t,e,n,s,o,c){let a;ut(s,function(s,h){if(function(t){return Z(t,u)}(h))return void(st(t,h)!==r?c(h,t,e,n):o&&(a?R(a,h):a=[h]));const l=function(t,e){return t===e?e.length:B(t,e+=f)?e.length:i}(h,t);if(l>=0){const t=M(h,l),r=Ht(e,t),i=Ht(n,t);r!==i&&c(h,h,r,i)}}),a&&It(t,e,n,a,c)}function Lt(t,e,n){if(n.count&&e)return n.count--,e[0]!==e[1]}const Mt={watcher:l};function qt(e,n){return m(e)?(Mt.watcher=e,Mt.immediate=n===t,Mt):e&&e.watcher?e:void 0}class Ft{constructor(t,e){this.data=t||{},this.context=e||this,this.nextTask=new Wt,this.syncEmitter=new jt,this.asyncEmitter=new jt,this.asyncChanges={}}get(t,e,n){const r=Ut.current,{data:i,computed:s}=this;if(t===g)return i;let o;return r&&!n&&r.add(t),s&&(o=lt(s,t)),o||(o=lt(i,t)),o?o.value:e}set(t,e){const n=this,{data:r,computed:i}=n,s=function(t,e){const s=n.get(e);if(t===s)return;let o;it(e,function(e,n,s){0!==n?o&&(n===s?o[e]=t:o=o[e]||(o[e]={})):i&&i[e]?0===s?i[e].set(t):o=i[e].get():0===s?r[e]=t:o=r[e]||(r[e]={})}),n.diff(e,t,s)};b(t)?s(e,t):y(t)&&ut(t,s)}diff(e,n,i){const s=this,{syncEmitter:o,asyncEmitter:c,asyncChanges:u}=s,f=36!==G(e);Yt(e,n,i,o.listeners,f,function(t,e,n,r){o.fire(t,[n,r,e])}),Yt(e,n,i,c.listeners,f,function(e,n,i,o){k(c.listeners[e],function(t){t.count++});const{keypaths:f}=u[n]||(u[n]={value:o,keypaths:[]});D(f,e)||R(f,e),s.pending||(s.pending=t,s.nextTask.append(function(){s.pending&&(s.pending=r,s.diffAsync())}))})}diffAsync(){const t=this,{asyncEmitter:e,asyncChanges:n}=t;t.asyncChanges={},ut(n,function(n,r){const i=[t.get(r),n.value,r];k(n.keypaths,function(t){e.fire(t,i,Lt)})})}addComputed(e,n){let r,i,s=t,o=t,c=[];if(m(n))r=n;else if(y(n)){const t=n;x(t.cache)&&(s=t.cache),x(t.sync)&&(o=t.sync),v(t.deps)&&(c=ht(t.deps)),m(t.get)&&(r=t.get),m(t.set)&&(i=t.set)}if(r){const t=this,n=new Ut(e,o,s,c,t,r,i);return t.computed||(t.computed={}),t.computed[e]=n,n}}removeComputed(t){const{computed:e}=this;e&&pt(e,t)&&delete e[t]}watch(t,e,n){const i=this,{context:s,syncEmitter:o,asyncEmitter:c}=i,u=function(t,e){const n=e.sync?o:c,u={fn:e.watcher,ctx:s,count:0};e.once&&(u.max=1),n.on(t,u),e.immediate&&A(e.watcher,s,[i.get(t),r,t])};b(t)?u(t,qt(e,n)):ut(t,function(t,e){u(e,qt(t))})}unwatch(t,e){this.syncEmitter.off(t,e),this.asyncEmitter.off(t,e)}toggle(t){const e=!this.get(t);return this.set(t,e),e}increase(t,e,n){const r=_t(this.get(t),0)+(e||1);if(!w(n)||r<=n)return this.set(t,r),r}decrease(t,e,n){const r=_t(this.get(t),0)-(e||1);if(!w(n)||r>=n)return this.set(t,r),r}insert(n,r,i){let s=this.get(n);s=v(s)?ht(s):[];const{length:o}=s;if(i===t||i===o)s.push(r);else if(i===e||0===i)s.unshift(r);else{if(!(i>0&&i<o))return;s.splice(i,0,r)}return this.set(n,s),t}append(e,n){return this.insert(e,n,t)}prepend(t,n){return this.insert(t,n,e)}removeAt(e,n){let r=this.get(e);if(v(r)&&n>=0&&n<r.length)return(r=ht(r)).splice(n,1),this.set(e,r),t}remove(e,n){let r=this.get(e);if(v(r)&&T(r=ht(r),n))return this.set(e,r),t}copy(t,e){return ht(t,e)}destroy(){this.syncEmitter.off(),this.asyncEmitter.off(),this.nextTask.clear(),ft(this)}}class Bt{constructor(e){const n=this,r=e||p;n.$emitter=new jt(t),r.events&&n.on(r.events);let{data:i,props:s,vnode:o,propTypes:c,computed:u,methods:f,watchers:a,extensions:h}=r;n.$options=r,h&&at(n,h);const l=s?ht(s):{},d=n.$observer=new Ft(l,n);u&&ut(u,function(t,e){d.addComputed(e,t)});const g=m(i)?A(i,n,e):i;y(g)&&ut(g,function(t,e){l[e]=t}),f&&ut(f,function(t,e){n[e]=t}),a&&n.watch(a)}static define(t){return t}static use(t){t.install(Bt)}static nextTick(t,e){Wt.shared().append(t,e)}static compile(t,e){return t}static directive(t,e){}static transition(t,e){}static component(t,e){}static partial(t,e){}static filter(t,e){}get(t,e){return this.$observer.get(t,e)}set(t,e){const{$observer:n}=this;n&&n.set(t,e)}on(t,e){return Vt(this,t,e),this}once(e,n){return Vt(this,e,n,t),this}off(t,e){return this.$emitter.off(t,e),this}fire(e,n,i){let s,o=this,{$emitter:c,$parent:u,$children:f}=o,a=e instanceof O?e:new O(e),h=[a];if(a.ns===r){const t=c.parse(a.type);a.type=t.type,a.ns=t.ns}return a.target||(a.target=o),y(n)?R(h,n):n===t&&(i=t),(s=i&&a.target===o?t:c.fire(a,h))&&(i?f&&(a.phase=O.PHASE_DOWNWARD,k(f,function(e){return s=e.fire(a,n,t)})):u&&(a.phase=O.PHASE_UPWARD,s=u.fire(a,n))),s}watch(t,e,n){return this.$observer.watch(t,e,n),this}unwatch(t,e){return this.$observer.unwatch(t,e),this}loadComponent(t,e){}createComponent(t,e){return this}directive(t,e){}transition(t,e){}component(t,e){}partial(t,e){}filter(t,e){}forceUpdate(t){}render(){}update(t,e){}checkProp(t,e){}destroy(){const{$parent:t,$options:e,$emitter:n,$observer:r}=this;r.destroy(),n.off(),ft(this)}nextTick(t){this.$observer.nextTask.append(t,this)}toggle(t){return this.$observer.toggle(t)}increase(t,e,n){return this.$observer.increase(t,e,n)}decrease(t,e,n){return this.$observer.decrease(t,e,n)}insert(t,e,n){return this.$observer.insert(t,e,n)}append(t,e){return this.$observer.append(t,e)}prepend(t,e){return this.$observer.prepend(t,e)}removeAt(t,e){return this.$observer.removeAt(t,e)}remove(t,e){return this.$observer.remove(t,e)}copy(t,e){return this.$observer.copy(t,e)}}function Gt(t,e,n,r){const i={fn:n,ctx:t};r&&(i.max=1),t.$emitter.on(e,i)}function Vt(t,e,n,r){b(e)?Gt(t,e,n,r):ut(e,function(e,n){Gt(t,n,e,r)})}Bt.version="1.0.0-alpha.120",Bt.is=E,Bt.array=W,Bt.object=dt,Bt.string=K,Bt.logger=Ct,Bt.Event=O,Bt.Emitter=jt;export default Bt;
//# sourceMappingURL=yox.esm.min.js.map
